# 大纲模板使用指南

## 📚 大纲模板总览

系统现已支持**43个大纲模板**，包括：

### 通用结构模板（7个）

1. **三幕式大纲模板** - 经典的三幕式叙事结构
2. **起承转合式大纲模板** - 中国传统四段式布局
3. **英雄之旅大纲模板** - 约瑟夫·坎贝尔的12阶段结构
4. **草蛇灰线式大纲模板** - 伏笔布局，线索贯穿
5. **碎片拼贴式大纲模板** - 非线性叙事，多视角拼贴
6. **弗莱塔格金字塔模板** - 经典五幕戏剧结构
7. **救猫咪15节拍模板** - 精确控制节奏的15个节拍

### 类型特定模板（36个）

#### 基础类型（11个）
- 言情_大纲模板.yaml
- 玄幻_大纲模板.yaml
- 仙侠_大纲模板.yaml
- 悬疑_大纲模板.yaml
- 科幻_大纲模板.yaml
- 奇幻_大纲模板.yaml
- 脑洞_大纲模板.yaml
- 都市_大纲模板.yaml
- 历史_大纲模板.yaml
- 古言_大纲模板.yaml
- 无CP_大纲模板.yaml

#### 核心情节（7个）
- 重生文_大纲模板.yaml
- 穿越文_大纲模板.yaml
- 穿书文_大纲模板.yaml
- 系统文_大纲模板.yaml
- 无限流_大纲模板.yaml
- 复仇文_大纲模板.yaml
- 升级流_大纲模板.yaml

#### 热门设定（11个）
- 爽文_大纲模板.yaml
- 屌丝逆袭_大纲模板.yaml
- 废柴流_大纲模板.yaml
- 打脸爽文_大纲模板.yaml
- 追妻火葬场_大纲模板.yaml
- 马甲文_大纲模板.yaml
- 真假千金_大纲模板.yaml
- 迪化文_大纲模板.yaml
- 发疯文学_大纲模板.yaml
- 虐文_大纲模板.yaml
- CP塑造_大纲模板.yaml

#### 背景职业（7个）
- 种田文_大纲模板.yaml
- 宫斗_宅斗_大纲模板.yaml
- 末世文_大纲模板.yaml
- 娱乐圈文_大纲模板.yaml
- 总裁文_大纲模板.yaml
- 灵异文_大纲模板.yaml
- 赛博朋克_大纲模板.yaml
- 商战文_大纲模板.yaml
- 冒险小说_大纲模板.yaml

## 🎯 使用方法

### 1. 自动选择模板

系统会根据小说类型自动选择对应的大纲模板：

```python
from agents.planner import PlannerAgent

planner = PlannerAgent(llm_client, memory_manager)
outline = planner.generate_outline(structure, novel_type="重生文")
# 自动使用"重生文_大纲模板.yaml"
```

### 2. 查看可用模板

```python
templates = planner.get_available_templates()
print(templates)
# 输出所有可用模板列表
```

### 3. 手动指定模板

```python
# 加载特定模板
template = planner._load_template_for_genre("系统文")
```

## 📋 模板结构

每个类型特定模板包含：

```yaml
structure_type: "类型名称"
description: "类型描述"
base_structure: "基础结构（三幕式/英雄之旅等）"
special_elements: ["特殊元素1", "特殊元素2", ...]
key_plot_points: ["关键情节点1", "关键情节点2", ...]
acts:
  - act: "第一幕：开端"
    percentage: 25
    description: "建立背景和人物"
    key_elements: [...]
    plot_points: [...]
  - act: "第二幕：发展"
    percentage: 50
    description: "推进情节和冲突"
    ...
  - act: "第三幕：高潮与结局"
    percentage: 25
    description: "高潮和收束"
    ...
chapter_distribution:
  total_chapters: 100
  act1_chapters: 25
  act2_chapters: 50
  act3_chapters: 25
```

## 🎨 模板特点

### 类型特定元素

每个类型模板都包含：
- **特殊元素**: 该类型必须包含的元素
- **关键情节点**: 该类型的典型情节发展
- **基础结构**: 推荐使用的叙事结构

### 示例：系统文模板

```yaml
special_elements:
  - "系统提示"
  - "任务系统"
  - "奖励机制"
  - "系统升级"

key_plot_points:
  - "系统激活"
  - "接取任务"
  - "完成任务"
  - "获得奖励"
  - "系统升级"
```

## 🔧 自定义模板

### 创建新模板

1. 在 `outline_templates/` 目录下创建新的YAML文件
2. 遵循标准模板结构
3. 系统会自动识别和加载

### 修改现有模板

直接编辑对应的YAML文件即可，系统会自动使用更新后的模板。

## ✅ 模板选择逻辑

1. **优先使用类型特定模板**: 如果指定了类型，优先使用该类型的模板
2. **回退到通用模板**: 如果没有类型特定模板，使用通用结构模板
3. **默认三幕式**: 如果都没有，使用三幕式结构

## 📊 模板统计

- **通用模板**: 8个
- **类型特定模板**: 36个
- **总计**: 44个大纲模板

## 🎯 最佳实践

1. **明确类型**: 指定小说类型以获得最佳模板
2. **组合使用**: 可以结合多个类型的特点
3. **灵活调整**: 根据实际需求调整模板结构
4. **参考示例**: 查看现有模板作为参考

---

**总结**: 系统现已支持44个大纲模板，涵盖所有36种类型，可根据类型自动选择最适合的模板结构。

