# 手动安装依赖说明

如果自动安装脚本无法找到 Python，请按照以下步骤手动安装：

## 方法 1：使用命令行（推荐）

1. **打开新的 PowerShell 或命令提示符窗口**（重要：需要新窗口以刷新环境变量）

2. **导航到项目目录**：
   ```powershell
   cd "C:\Users\Lenovo\AppData\Local\LM-Studio\app-0.3.5\NovelCorpusExtractor"
   ```

3. **验证 Python 安装**：
   ```powershell
   python --version
   ```
   或
   ```powershell
   py --version
   ```

4. **如果 Python 可用，安装依赖**：
   ```powershell
   python -m pip install --upgrade pip
   python -m pip install -r requirements.txt
   ```

## 方法 2：如果 Python 不在 PATH 中

如果 `python` 命令不可用，请找到 Python 的安装路径，然后使用完整路径：

1. **查找 Python 安装位置**：
   - 常见位置：
     - `C:\Users\你的用户名\AppData\Local\Programs\Python\Python3xx\`
     - `C:\Program Files\Python3xx\`
     - `C:\Python3xx\`

2. **使用完整路径安装**：
   ```powershell
   "C:\Users\Lenovo\AppData\Local\Programs\Python\Python313\python.exe" -m pip install --upgrade pip
   "C:\Users\Lenovo\AppData\Local\Programs\Python\Python313\python.exe" -m pip install -r requirements.txt
   ```
   （请将路径中的 `Python313` 替换为你的实际 Python 版本号）

## 方法 3：使用 Python Launcher

如果安装了 Python Launcher，可以尝试：

```powershell
py -m pip install --upgrade pip
py -m pip install -r requirements.txt
```

## 需要安装的依赖包

安装脚本会自动安装以下依赖：
- **PyYAML** - 配置文件处理
- **tqdm** - 进度条显示
- **openai** - OpenAI API 客户端
- **anthropic** - Anthropic Claude API 客户端
- **google-generativeai** - Google Gemini API 客户端
- **aiohttp** - 异步 HTTP 客户端
- **chromadb** - 向量数据库（可选）
- **python-dotenv** - 环境变量管理
- **fastapi** - Web 框架
- **uvicorn** - ASGI 服务器
- **python-multipart** - 文件上传支持

## 验证安装

安装完成后，可以运行以下命令验证：

```powershell
python -c "import fastapi; print('FastAPI installed successfully')"
python -c "import openai; print('OpenAI installed successfully')"
```

## 启动服务器

依赖安装完成后，可以运行：

```powershell
python api_server.py
```

或使用批处理文件：

```powershell
.\start_api.bat
```

## 常见问题

### 问题：`python` 命令未找到
**解决方案**：
1. 确保安装 Python 时勾选了 "Add Python to PATH"
2. 重启终端窗口
3. 或者使用完整路径调用 Python

### 问题：权限错误
**解决方案**：
```powershell
python -m pip install --user -r requirements.txt
```

### 问题：网络问题导致安装失败
**解决方案**：
```powershell
python -m pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```
（使用清华大学镜像源）


